<!DOCTYPE html>
<html>
  <head>
    <title>Back End Assessment</title>
  </head>
  <body class="container">
    <button id="complimentButton">Get a compliment</button>
   
    
<br>
<br>
<br>


    <h2>Add a User</h2>
    <form id="create-form">
        <input type="text" id="first" placeholder="First Name"/>
        <input type="text" id="last" placeholder="Last Name"/>
    
        <button id='addBtn'>add new character</button>
    </form>
    </main>

    <section></section>





    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
    <!-- <script src="../server/index.js"></script> -->
    <!-- <script src="../server/index.js"></script> -->

  <script>
     document.getElementById("complimentButton").onclick = function () {
    axios.get("http://localhost:4000/api/compliment/")
        .then(function (response) {
          const data = response.data;
          alert(data)
     
        });
 

      }


const addBtn = document.querySelector('#addBtn')
const createForm = document.querySelector('#create-form')
const newFirstName = document.querySelector('#first')
const newLastName = document.querySelector('#last')
const userContainer = document.querySelector('section')

const baseURL =  'http://localhost:4000';

function createUserCard(char) {
  let charCard = document.createElement('div')
  charCard.innerHTML = `<h3>${char.firstName} ${char.lastName}</h3>
`
 
userContainer.appendChild(charCard)
}

function clearCharacters() {
  userContainer.innerHTML = ``
}


//GET ONE NAME BY PUSHING BUTTON
function getOneUser(evt){
  console.log(baseURL + '/users/' + evt.target.getAttribute('id'))
  axios
    .get(baseURL + '/users/' + evt.target.getAttribute('id'))
    .then(res => {
      clearCharacters();

      createUserCard(res.data)
    })
    .catch(err => console.log(err));
}



//MAKE FORM WORK
function submitNewChar(e){
e.preventDefault();

const body = {
  firstName: newFirstName.value,
  lastName: newLastName.value, 
 
}

axios
.post(baseURL + '/users', body)
.then(res => {
  clearCharacters();

  res.data.forEach(userObj => createUserCard(userObj))
})
.catch(err => console.log(err));

}

createForm.addEventListener('submit', submitNewChar)






  </script>



  </body>
</html>
